!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n(r(9)),i=r(12),o=document.createElement("canvas");o.width=o.height=2048;const s=o.getContext("2d"),l=new i.TinySDF(54,5,18);let h=PIXI.BaseTexture.from(o);h.mipmap=PIXI.MIPMAP_MODES.OFF;const u=[],c=new a.default({max:1024,dispose:(t,e)=>{u.push([e.x,e.y])}});let f=0,d=0,v=!1;function g(t,e){let r=c.get(t+e);if(!r){const n=l.renderToImageData(t,e),[a,i]=l.measureCharacter(t,e),o=a/i,h=u.shift();let g,p;h?[g,p]=h:(g=f,p=d,f+=64,f>1984&&(f=0,d+=64),d>1984&&console.error("cache texture size overflow!"));const b=g/2048,y=p/2048,m=(g+64*o)/2048,w=(p+64)/2048;r={character:t,uvs:new Uint32Array([(65535*y&65535)<<16|65535*b&65535,(65535*y&65535)<<16|65535*m&65535,(65535*w&65535)<<16|65535*m&65535,(65535*w&65535)<<16|65535*b&65535]),realWidth:a,realHeight:i},c.set(t+e,r),v=!0,s.putImageData(n,g,p)}return r}e.getTextData=function(t){t.length>1024&&console.warn("[RichText] The number of characters to be rendered in one time exceeds the number in the cache, and the text rendering may appear with an error. To resolve it, you should enlarge the cache or divide the text to two part at least.");const e=[];for(const r of t){const t=g(r);e.push(t)}return e},e.getUVVertex=g,e.autoUpdateTexture=function(){v&&(h.update(),v=!1)},e.getSDFTexture=function(){return h},e.getSDFConfig=function(){return{size:54,buffer:5,sizeWithBuffer:64,textureSize:2048}}},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){var n=r(1),a={};for(var i in n)n.hasOwnProperty(i)&&(a[n[i]]=i);var o=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in o)if(o.hasOwnProperty(s)){if(!("channels"in o[s]))throw new Error("missing channels property: "+s);if(!("labels"in o[s]))throw new Error("missing channel labels property: "+s);if(o[s].labels.length!==o[s].channels)throw new Error("channel and label counts mismatch: "+s);var l=o[s].channels,h=o[s].labels;delete o[s].channels,delete o[s].labels,Object.defineProperty(o[s],"channels",{value:l}),Object.defineProperty(o[s],"labels",{value:h})}o.rgb.hsl=function(t){var e,r,n=t[0]/255,a=t[1]/255,i=t[2]/255,o=Math.min(n,a,i),s=Math.max(n,a,i),l=s-o;return s===o?e=0:n===s?e=(a-i)/l:a===s?e=2+(i-n)/l:i===s&&(e=4+(n-a)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(o+s)/2,[e,100*(s===o?0:r<=.5?l/(s+o):l/(2-s-o)),100*r]},o.rgb.hsv=function(t){var e,r,n,a,i,o=t[0]/255,s=t[1]/255,l=t[2]/255,h=Math.max(o,s,l),u=h-Math.min(o,s,l),c=function(t){return(h-t)/6/u+.5};return 0===u?a=i=0:(i=u/h,e=c(o),r=c(s),n=c(l),o===h?a=n-r:s===h?a=1/3+e-n:l===h&&(a=2/3+r-e),a<0?a+=1:a>1&&(a-=1)),[360*a,100*i,100*h]},o.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[o.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},o.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,a=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-a)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-a-e)/(1-e)||0),100*e]},o.rgb.keyword=function(t){var e=a[t];if(e)return e;var r,i,o,s=1/0;for(var l in n)if(n.hasOwnProperty(l)){var h=n[l],u=(i=t,o=h,Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)+Math.pow(i[2]-o[2],2));u<s&&(s=u,r=l)}return r},o.keyword.rgb=function(t){return n[t]},o.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},o.rgb.lab=function(t){var e=o.rgb.xyz(t),r=e[0],n=e[1],a=e[2];return n/=100,a/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(a=a>.008856?Math.pow(a,1/3):7.787*a+16/116))]},o.hsl.rgb=function(t){var e,r,n,a,i,o=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[i=255*l,i,i];e=2*l-(r=l<.5?l*(1+s):l+s-l*s),a=[0,0,0];for(var h=0;h<3;h++)(n=o+1/3*-(h-1))<0&&n++,n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,a[h]=255*i;return a},o.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,a=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,a*=i<=1?i:2-i,[e,100*(0===n?2*a/(i+a):2*r/(n+r)),100*((n+r)/2)]},o.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,a=Math.floor(e)%6,i=e-Math.floor(e),o=255*n*(1-r),s=255*n*(1-r*i),l=255*n*(1-r*(1-i));switch(n*=255,a){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}},o.hsv.hsl=function(t){var e,r,n,a=t[0],i=t[1]/100,o=t[2]/100,s=Math.max(o,.01);return n=(2-i)*o,r=i*s,[a,100*(r=(r/=(e=(2-i)*s)<=1?e:2-e)||0),100*(n/=2)]},o.hwb.rgb=function(t){var e,r,n,a,i,o,s,l=t[0]/360,h=t[1]/100,u=t[2]/100,c=h+u;switch(c>1&&(h/=c,u/=c),n=6*l-(e=Math.floor(6*l)),0!=(1&e)&&(n=1-n),a=h+n*((r=1-u)-h),e){default:case 6:case 0:i=r,o=a,s=h;break;case 1:i=a,o=r,s=h;break;case 2:i=h,o=r,s=a;break;case 3:i=h,o=a,s=r;break;case 4:i=a,o=h,s=r;break;case 5:i=r,o=h,s=a}return[255*i,255*o,255*s]},o.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,a=t[3]/100;return[255*(1-Math.min(1,e*(1-a)+a)),255*(1-Math.min(1,r*(1-a)+a)),255*(1-Math.min(1,n*(1-a)+a))]},o.xyz.rgb=function(t){var e,r,n,a=t[0]/100,i=t[1]/100,o=t[2]/100;return r=-.9689*a+1.8758*i+.0415*o,n=.0557*a+-.204*i+1.057*o,e=(e=3.2406*a+-1.5372*i+-.4986*o)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},o.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},o.lab.xyz=function(t){var e,r,n,a=t[0];e=t[1]/500+(r=(a+16)/116),n=r-t[2]/200;var i=Math.pow(r,3),o=Math.pow(e,3),s=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},o.lab.lch=function(t){var e,r=t[0],n=t[1],a=t[2];return(e=360*Math.atan2(a,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+a*a),e]},o.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},o.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],a=1 in arguments?arguments[1]:o.rgb.hsv(t)[2];if(0===(a=Math.round(a/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===a&&(i+=60),i},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},o.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},o.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},o.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map((function(t){return t+t})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},o.rgb.hcg=function(t){var e,r=t[0]/255,n=t[1]/255,a=t[2]/255,i=Math.max(Math.max(r,n),a),o=Math.min(Math.min(r,n),a),s=i-o;return e=s<=0?0:i===r?(n-a)/s%6:i===n?2+(a-r)/s:4+(r-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?o/(1-s):0)]},o.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,a=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(a=(r-.5*n)/(1-n)),[t[0],100*n,100*a]},o.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,a=0;return n<1&&(a=(r-n)/(1-n)),[t[0],100*n,100*a]},o.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var a,i=[0,0,0],o=e%1*6,s=o%1,l=1-s;switch(Math.floor(o)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=l,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=l,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=l}return a=(1-r)*n,[255*(r*i[0]+a),255*(r*i[1]+a),255*(r*i[2]+a)]},o.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},o.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},o.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},o.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,a=0;return n<1&&(a=(r-n)/(1-n)),[t[0],100*n,100*a]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=o.gray.hsv=function(t){return[0,0,t[0]]},o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=n(r(4));PIXI.settings.RENDER_OPTIONS.antialias=!0;var i=new PIXI.Application({view:document.getElementById("app"),width:880,height:1080});i.renderer.backgroundColor=16777215;var o=new a.default("汉语（Chinese）: \n我与父亲不相见已二年余了，我最不能忘记的是他的背影。那年冬天，祖母死了，父亲的差使也交卸了，正是祸不单行的日子，我从北京到徐州，打算跟着父亲奔丧回家。到徐州见着父亲，看见满院狼藉的东西，又想起祖母，不禁簌簌地流下眼泪。父亲说，“事已如此，不必难过，好在天无绝人之路！”\n回家变卖典质，父亲还了亏空；又借钱办了丧事。这些日子，家中光景很是惨淡，一半为了丧事，一半为了父亲赋闲。\n\n日语（Japanese）：\n富士山は静岡県と山梨県に跨る活火山。標高は3776mであり日本最高峰である。古文献では不二とも書く。富士箱根伊豆国立公園に指定されている。その優美な風貌は、国内のみならず海外でも日本の象徴として広く知られている。芙蓉峰・富嶽などとも呼ばれる。古来より歌枕として著名である。\n\nWestern :  \nLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. \n\n混合（Mixed）：\n如同大部分北海道地区的地名由来，“札幌”这一地名也是起源于北海道当地的原住民阿伊努族的语言阿伊努语。关于札幌的名称起源有二种说法，一说认为札幌（さっぽろ）起源于阿伊努语中的“sat-poro-pet/サッ・ポロ・ペッ”，意指“干渴的大河”；另一说则认为起源于阿伊努语中的“sar-poro-pet/サリ・ポロ・ペッ”，意思是完全与前者颠倒的“有大片湿地的河流”。\n\nQuenya :\nÁva turma quesset lá, ehtë isqua maquetta úr sat, foa et nírë inqua. Mardo vëaner axo er. Us men sundo métima, cëa na aiwë ronyo, mi pahta capië latin san. Tec yúyo onóro anwavë ëa, foa tanga rangwë at. Armar turúva mettarë úr nár, uë nulda linga lin, wán úr cíla raxë moina.\n\nRich Text:\n泽材<fillColor=0xff6600>灭<bold>逐</bold></fillColor>莫笔<strokeEnable=true>亡</strokeEnable>鲜，<strokeEnable=true><strokeColor=black><fillColor=red><fontSize=64>如何</fontSize><fillColor=orange><italic>气</italic><fillColor=yellow><bold>死</bold><fillColor=green>你的<fillColor=0xff6600>设<fillColor=blue>计师<fillColor=magenta><fontSize=28>朋</fontSize>友</fillColor></fillColor></fillColor></fillColor></fillColor></fillColor></fillColor></strokeColor></strokeEnable>\n");i.stage.addChild(o),o.style.fontSize=24,o.style.strokeEnable=!1,o.style.strokeThickness=3,o.style.strokeColor="white",o.style.shadowEnable=!1,o.style.shadowAngle=.707,o.style.shadowDistance=0,o.style.shadowThickness=4,o.style.shadowBlur=.15,o.style.layout.gridSize=24,o.style.layout.column=35,o.y=0;const s=setInterval(()=>{o.renderPosition+=1,o.renderPosition>=(o._vertexList.length||o.text.length)&&clearInterval(s)},20)},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),r(5);const a=r(7),i=n(r(14)),o=r(0).getSDFConfig();class s extends PIXI.Sprite{constructor(t,e){super(),this._style=new i.default(e,e&&e.layout||{}),this._text=t,this._vertexList=[],this.needUpdateCharacter=!0,this.needUpdateTypo=!0,this.vertexCount=0,this.renderPosition=-1,this.pluginName="richtext"}set text(t){this._text!==t&&(this._text=t,this.needUpdateTypo=!0,this.needUpdateCharacter=!0)}get text(){return this._text}get style(){return this._style}set style(t){this._style=new i.default(t,t.layout||this._style.layout||{}),this.needUpdateTypo=!0,this.needUpdateCharacter=!0}get layout(){return this._style.layout}set layout(t){this._style=new i.default(this._style,t||{}),this.needUpdateTypo=!0,this.needUpdateCharacter=!0}get width(){const{gridSize:t,xInterval:e,column:r}=this._style.layout,{x:n,y:a,realWidth:i,fontSize:s}=this._vertexList[0===this.renderPosition?0:this.renderPosition>0?this.renderPosition-1:this._vertexList.length-1];if(a>0)return(t+e)*r-e;return n+i*(s/o.size)}get height(){const{gridSize:t,yInterval:e,row:r}=this._style.layout,{y:n}=this._vertexList[0===this.renderPosition?0:this.renderPosition>0?this.renderPosition-1:this._vertexList.length-1];return n+t}get vertexList(){return this.renderPosition<0?this._vertexList:this._vertexList.slice(0,this.renderPosition)}get cursorPosition(){const{x:t,y:e,realWidth:r,realHeight:n,fontSize:a}=this._vertexList[0===this.renderPosition?0:this.renderPosition>0?this.renderPosition-1:this._vertexList.length-1];return{x:t+r*(a/o.size),y:e}}getLocalBounds(t){return this.updateText(),super.getLocalBounds.call(this,t)}_calculateBounds(){this.updateText();const t=this._calculateVertices(0,0,this.width,this.height);this._bounds.addQuad(t)}_render(t){const e=t.gl;e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE),e.enable(e.BLEND),this._transformID!==this.transform._worldID&&(this.needUpdateCharacter=!0,this._transformID=this.transform._worldID),(this.needUpdateTypo||this.needUpdateCharacter)&&(this.updateText(),this.needUpdateCharacter=!1);let r=t;t.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)}updateText(){this.needUpdateTypo&&(this._vertexList=a.parseRichText(this._text,this),this.needUpdateTypo=!1);for(const e of this._vertexList){const{realWidth:r,realHeight:n,x:a,y:i,fontSize:s,italic:l}=e,h=s/o.size;var t=this._calculateVertices(a,i,r*h,n*h,l);t&&Object.assign(e,{vertexData:t})}}calculateVertices(){}_calculateVertices(t,e,r,n,a=!1){const i=this.transform.worldTransform,o=this.anchor,s=a?Math.sin(-.207):0,l=i,h=l.a,u=l.b,c=l.c=s,f=l.d,d=l.tx-e*s,v=l.ty;let g=0,p=0,b=0,y=0;p=t-o.x*r,g=p+r,y=e-o.y*n,b=y+n;const m=new Float32Array(8);return m[0]=h*p+c*y+d,m[1]=f*y+u*p+v,m[2]=h*g+c*y+d,m[3]=f*y+u*g+v,m[4]=h*g+c*b+d,m[5]=f*b+u*g+v,m[6]=h*p+c*b+d,m[7]=f*b+u*p+v,m}}e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});PIXI.ObjectRenderer;const n=PIXI.Renderer,a=r(6),i=(PIXI.checkMaxIfStatementsInShader,PIXI.utils.createIndicesForQuads,PIXI.settings);class o extends PIXI.BatchGeometry{constructor(t=!1){super(t),this.vertByteSize=76,this.addIndex(this._indexBuffer).addAttribute("aVertexPosition",this._buffer,2,!1,PIXI.TYPES.FLOAT,this.vertByteSize,0).addAttribute("aTextureCoord",this._buffer,2,!1,PIXI.TYPES.FLOAT,this.vertByteSize,8).addAttribute("aColor",this._buffer,4,!0,PIXI.TYPES.UNSIGNED_BYTE,this.vertByteSize,16).addAttribute("aTextureId",this._buffer,1,!0,PIXI.TYPES.FLOAT,this.vertByteSize,20).addAttribute("aShadow",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,24).addAttribute("aStroke",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,28).addAttribute("aFill",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,32).addAttribute("aGamma",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,36).addAttribute("aShadowBlur",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,40).addAttribute("aShadowColor",this._buffer,4,!0,PIXI.TYPES.UNSIGNED_BYTE,this.vertByteSize,44).addAttribute("aStrokeColor",this._buffer,4,!0,PIXI.TYPES.UNSIGNED_BYTE,this.vertByteSize,48).addAttribute("aFillColor",this._buffer,4,!0,PIXI.TYPES.UNSIGNED_BYTE,this.vertByteSize,52).addAttribute("aShadowOffset",this._buffer,2,!1,PIXI.TYPES.FLOAT,this.vertByteSize,60).addAttribute("aShadowEnable",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,64).addAttribute("aStrokeEnable",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,68).addAttribute("aFillEnable",this._buffer,1,!1,PIXI.TYPES.FLOAT,this.vertByteSize,72)}addAttribute(t,e,r,n,a,i=0,o=0,s=!1){return PIXI.Geometry.prototype.addAttribute.call(this,t,e,r,n,a,i,o,s),this}addIndex(t){return PIXI.Geometry.prototype.addIndex.call(this,t),this}}class s extends PIXI.AbstractBatchRenderer{constructor(t){super(t),this._batchCount=0,this.shaderGenerator=a.getBatchShaderGenerator(),this.geometryClass=o,this.vertexSize=19,this.size=Math.round(i.SPRITE_BATCH_SIZE/5)}render(t){if(t.vertexList.length<=0)return;this._target=t;let e=Math.ceil(this._target.vertexList.length/this.size);for(let t=0;t<e;t++){let e=0,r=0;this._target.vertexList.length<this.size?r=this._target.vertexList.length:(e=t*this.size,r=Math.min((t+1)*this.size,this._target.vertexList.length)),this._indexCount+=6*(r-e),this._vertexCount+=4*(r-e);for(let t=e;t<r;t++){let e=this._target.vertexList[t];this._bufferedTextures[this._bufferSize]=e.baseTexture,this._bufferedElements[this._bufferSize]=e,this._bufferSize++}this.flush()}}buildDrawCalls(t,e,r){var n=this._bufferedElements,a=this._attributeBuffer,i=this._indexBuffer,o=this.vertexSize,s=PIXI.AbstractBatchRenderer._drawCallPool,l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=s[l];c.start=this._iIndex,c.texArray=t;for(var f=e;f<r;++f){var d=n[f],v=d.baseTexture,g=PIXI.utils.premultiplyBlendMode[v.alphaMode?1:0][this._target.blendMode];n[f]=null,e<f&&c.blend!==g&&(c.size=u-c.start,e=f,(c=s[++l]).texArray=t,c.start=u),this._packInterleavedGeometry(d,a,i,h,u),h+=4*o,u+=6,c.blend=g}e<r&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}_packInterleavedGeometry(t,e,r,n,a){var i=e.uint32View,o=e.float32View,s=n/this.vertexSize;let l=Math.min(t.worldAlpha,1);var h=l<1&&t.baseTexture.alphaMode?PIXI.utils.premultiplyTint(t.tintRGB,l):t.tintRGB+(255*l<<24);let u=t.vertexData.length/2;for(let e=0;e<u;e++)o[n++]=t.vertexData[2*e],o[n++]=t.vertexData[2*e+1],o[n++]=(65535&t.uvs[e])/65535,o[n++]=(t.uvs[e]>>16&65535)/65535,i[n++]=h,o[n++]=t.baseTexture._batchLocation,o[n++]=t.shadow,o[n++]=t.stroke,o[n++]=t.fill,o[n++]=t.gamma,o[n++]=t.shadowBlur,i[n++]=t.shadowColor,i[n++]=t.strokeColor,i[n++]=t.fillColor,o[n++]=t.shadowOffset[0],o[n++]=t.shadowOffset[1],o[n++]=t.shadowEnable,o[n++]=t.strokeEnable,o[n++]=t.fillEnable;r[a++]=0+s,r[a++]=1+s,r[a++]=2+s,r[a++]=0+s,r[a++]=2+s,r[a++]=3+s}}e.default=s,n.registerPlugin("richtext",s)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.vertexSrc="\nprecision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\nattribute float aShadow;\nattribute float aStroke;\nattribute float aFill;\nattribute float aGamma;\nattribute float aShadowBlur;\nattribute vec4 aShadowColor;\nattribute vec4 aStrokeColor;\nattribute vec4 aFillColor;\nattribute vec2 aShadowOffset;\nattribute float aShadowEnable;\nattribute float aStrokeEnable;\nattribute float aFillEnable;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nvarying float vShadow;\nvarying float vStroke;\nvarying float vFill;\nvarying float vGamma;\nvarying float vShadowBlur;\nvarying vec4 vShadowColor;\nvarying vec4 vStrokeColor;\nvarying vec4 vFillColor;\nvarying vec2 vShadowOffset;\nvarying float vShadowEnable;\nvarying float vStrokeEnable;\nvarying float vFillEnable;\n\nvoid main(){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n    vShadow = aShadow;\n    vStroke = aStroke;\n    vFill = aFill;\n    vGamma = aGamma;\n    vShadowColor = aShadowColor;\n    vShadowBlur = aShadowBlur;\n    vStrokeColor = aStrokeColor;\n    vFillColor = aFillColor;\n    vShadowOffset = aShadowOffset;\n    vShadowEnable = aShadowEnable;\n    vStrokeEnable = aStrokeEnable;\n    vFillEnable = aFillEnable;\n}\n",e.fragTemplate=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","varying float vShadow;","varying float vShadowBlur;","varying float vStroke;","varying float vFill;","varying float vGamma;","varying vec4 vShadowColor;","varying vec4 vStrokeColor;","varying vec4 vFillColor;","varying vec2 vShadowOffset;","varying float vShadowEnable;","varying float vStrokeEnable;","varying float vFillEnable;","const float smoothing = 0.25; //1.0 / 16.0;","void main(void){","float alphaStroke;","float alphaFill;","vec4 colorStroke;","float alphaShadow;","vec4 colorShadow;","vec4 colorFill;","float textureId = floor(vTextureId+0.5);","%forloop%","vec4 color = mix(colorShadow * vShadowEnable, colorStroke, alphaStroke) * vColor;","gl_FragColor = mix(color, colorFill, alphaFill) * vColor;","}"].join("\n");class n extends PIXI.BatchShaderGenerator{generateSampleSrc(t){let e="";e+="\n",e+="\n";for(let r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+=`if(textureId == ${r}.0)`),e+=`\n{\n            float dist = texture2D(uSamplers[${r}], vTextureCoord).r;\n            float distOffset = texture2D(uSamplers[${r}], vTextureCoord.xy - vShadowOffset).r;\n            alphaShadow = smoothstep(vShadow - vGamma - vShadowBlur, vShadow + vGamma + vShadowBlur, distOffset);\n            alphaStroke = smoothstep(vStroke - vGamma, vStroke + vGamma, dist * vStrokeEnable);\n            alphaFill = smoothstep(vFill - vGamma, vFill + vGamma, dist);\n            colorShadow = vec4(vShadowColor.rgb, alphaShadow) * vShadowColor.a;\n            colorStroke = vec4(vStrokeColor.rgb, alphaStroke) * vStrokeColor.a;\n            colorFill = vec4(vFillColor.rgb, alphaFill * vFillEnable) * vFillColor.a;\n            }`;return e+="\n",e+="\n",e}}e.RichTextBatchShaderGenerator=n,e.getBatchShaderGenerator=function(){return new n(e.vertexSrc,e.fragTemplate)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),window.huozi=r(21).default,r(8);const a=r(0),i=n(r(13));a.getSDFConfig();e.parseRichText=function(t,e){performance.now();const r=UBBParser.parse(t),n=[];let o=e.style.clone();const s=[];let l=0;performance.now();for(const[t,h]of i.default(r)){if(h-l<0)for(let t=l-h;t>0;t--)o=s.pop();if(l=h,"text"===t.nodeType){const r=t.content,i=r.length,s=o.state;for(let t=0;t<i;t++)n.push(Object.assign(Object.assign(Object.assign({},s),a.getUVVertex(r[t],s.fontFamily)),{worldAlpha:e.worldAlpha,tintRGB:e._tintRGB,blendMode:e.blendMode}))}else s.push(o),o=o.clone(),Object.keys(o).includes(t.tagName)&&(o[t.tagName]=void 0===t.value||t.value)}return a.autoUpdateTexture(),performance.now(),huozi(n,Object.assign(Object.assign({},e.style.layout),{fixLeftQuote:!1}))}},function(t,e){t.exports=window.UBBParser=function(){"use strict";function t(e,r,n,a){this.message=e,this.expected=r,this.found=n,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(t,Error),t.buildMessage=function(t,e){var r={literal:function(t){return'"'+a(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?i(t.parts[e][0])+"-"+i(t.parts[e][1]):i(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function a(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}return"Expected "+function(t){var e,n,a,i=new Array(t.length);for(e=0;e<t.length;e++)i[e]=(a=t[e],r[a.type](a));if(i.sort(),i.length>0){for(e=1,n=1;e<i.length;e++)i[e-1]!==i[e]&&(i[n]=i[e],n++);i.length=n}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+a(t)+'"':"end of input"}(e)+" found."},{SyntaxError:t,parse:function(e,r){r=void 0!==r?r:{};var n,a={},i={Expression:B},o=B,s=I("<",!1),l=I("=",!1),h=I(">",!1),u=I("</",!1),c=/^[^<\/>=]/,f=E(["<","/",">","="],!0,!1),d=/^[^<>]/,v=E(["<",">"],!0,!1),g=I("0x",!1),p=/^[0-9A-Fa-f]/,b=E([["0","9"],["A","F"],["a","f"]],!1,!1),y=/^[0-9]/,m=E([["0","9"]],!1,!1),w=I("true",!0),x=I("false",!0),S=0,k=0,A=[{line:1,column:1}],F=0,M=[],C=0;if("startRule"in r){if(!(r.startRule in i))throw new Error("Can't start parsing from rule \""+r.startRule+'".');o=i[r.startRule]}function _(){return e.substring(k,S)}function I(t,e){return{type:"literal",text:t,ignoreCase:e}}function E(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function T(t){var r,n=A[t];if(n)return n;for(r=t-1;!A[r];)r--;for(n={line:(n=A[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return A[t]=n,n}function P(t,e){var r=T(t),n=T(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function z(t){S<F||(S>F&&(F=S,M=[]),M.push(t))}function O(e,r,n){return new t(t.buildMessage(e,r),e,r,n)}function B(){var t,e;if(t=[],(e=j())!==a)for(;e!==a;)t.push(e),e=j();else t=a;return t}function j(){var t,r;return(t=function(){var t,r,n,i;if(t=S,(r=function(){var t,r,n,i,o,u;t=S,60===e.charCodeAt(S)?(r="<",S++):(r=a,0===C&&z(s));r!==a&&(n=D())!==a?(61===e.charCodeAt(S)?(i="=",S++):(i=a,0===C&&z(l)),i!==a&&(o=function(){var t;(t=function(){var t,r,n,i,o;t=S,r=S,"0x"===e.substr(S,2)?(n="0x",S+=2):(n=a,0===C&&z(g));if(n!==a){if(i=[],p.test(e.charAt(S))?(o=e.charAt(S),S++):(o=a,0===C&&z(b)),o!==a)for(;o!==a;)i.push(o),p.test(e.charAt(S))?(o=e.charAt(S),S++):(o=a,0===C&&z(b));else i=a;i!==a?r=n=[n,i]:(S=r,r=a)}else S=r,r=a;if(r===a)if(r=[],y.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,0===C&&z(m)),n!==a)for(;n!==a;)r.push(n),y.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,0===C&&z(m));else r=a;r!==a?(n=S,C++,62===e.charCodeAt(S)?(i=">",S++):(i=a,0===C&&z(h)),C--,i!==a?(S=n,n=void 0):n=a,n!==a?(k=t,r=parseInt(_()),t=r):(S=t,t=a)):(S=t,t=a);return t}())===a&&(t=function(){var t,r,n,i;t=S,"true"===e.substr(S,4).toLowerCase()?(r=e.substr(S,4),S+=4):(r=a,0===C&&z(w));r===a&&("false"===e.substr(S,5).toLowerCase()?(r=e.substr(S,5),S+=5):(r=a,0===C&&z(x)));r!==a?(n=S,C++,62===e.charCodeAt(S)?(i=">",S++):(i=a,0===C&&z(h)),C--,i!==a?(S=n,n=void 0):n=a,n!==a?(k=t,r="true"===_().toLowerCase(),t=r):(S=t,t=a)):(S=t,t=a);return t}())===a&&(t=L());return t}())!==a?(62===e.charCodeAt(S)?(u=">",S++):(u=a,0===C&&z(h)),u!==a?(k=t,c=o,r=[n.join(""),c],t=r):(S=t,t=a)):(S=t,t=a)):(S=t,t=a);var c;t===a&&(t=S,60===e.charCodeAt(S)?(r="<",S++):(r=a,0===C&&z(s)),r!==a&&(n=D())!==a?(62===e.charCodeAt(S)?(i=">",S++):(i=a,0===C&&z(h)),i!==a?(k=t,r=function(t){return[t.join("")]}(n),t=r):(S=t,t=a)):(S=t,t=a));return t}())!==a){for(n=[],i=j();i!==a;)n.push(i),i=j();n!==a&&(i=function(){var t,r,n,i;t=S,"</"===e.substr(S,2)?(r="</",S+=2):(r=a,0===C&&z(u));r!==a&&(n=D())!==a?(62===e.charCodeAt(S)?(i=">",S++):(i=a,0===C&&z(h)),i!==a?(k=t,r=n.join(""),t=r):(S=t,t=a)):(S=t,t=a);return t}())!==a?(k=S,o=i,(r[0]===o?void 0:a)!==a?(k=t,r=function(t,e,r){return{tagName:t[0],value:t[1],nodeType:"tag",children:e}}(r,n),t=r):(S=t,t=a)):(S=t,t=a)}else S=t,t=a;var o;return t}())===a&&(t=S,(r=function(){var t,e;t=S,(e=L())!==a&&(k=t,e={nodeType:"text",content:_()});return t=e}())!==a&&(k=t,r=r),t=r),t}function D(){var t,r;if(t=[],c.test(e.charAt(S))?(r=e.charAt(S),S++):(r=a,0===C&&z(f)),r!==a)for(;r!==a;)t.push(r),c.test(e.charAt(S))?(r=e.charAt(S),S++):(r=a,0===C&&z(f));else t=a;return t}function L(){var t,r,n;if(t=S,r=[],d.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,0===C&&z(v)),n!==a)for(;n!==a;)r.push(n),d.test(e.charAt(S))?(n=e.charAt(S),S++):(n=a,0===C&&z(v));else r=a;return r!==a&&(k=t,r=_()),t=r}if((n=o())!==a&&S===e.length)return n;throw n!==a&&S<e.length&&z({type:"end"}),O(M,F<e.length?e.charAt(F):null,F<e.length?P(F,F+1):P(F,F))}}}()},function(t,e,r){"use strict";const n=r(10),a=Symbol("max"),i=Symbol("length"),o=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),h=Symbol("dispose"),u=Symbol("noDisposeOnSet"),c=Symbol("lruList"),f=Symbol("cache"),d=Symbol("updateAgeOnGet"),v=()=>1;const g=(t,e,r)=>{const n=t[f].get(e);if(n){const e=n.value;if(p(t,e)){if(y(t,n),!t[s])return}else r&&(t[d]&&(n.value.now=Date.now()),t[c].unshiftNode(n));return e.value}},p=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[l]&&r>t[l]},b=t=>{if(t[i]>t[a])for(let e=t[c].tail;t[i]>t[a]&&null!==e;){const r=e.prev;y(t,e),e=r}},y=(t,e)=>{if(e){const r=e.value;t[h]&&t[h](r.key,r.value),t[i]-=r.length,t[f].delete(r.key),t[c].removeNode(e)}};class m{constructor(t,e,r,n,a){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=a||0}}const w=(t,e,r,n)=>{let a=r.value;p(t,a)&&(y(t,r),t[s]||(a=void 0)),a&&e.call(n,a.value,a.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[a]=t.max||1/0;const e=t.length||v;if(this[o]="function"!=typeof e?v:e,this[s]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[h]=t.dispose,this[u]=t.noDisposeOnSet||!1,this[d]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[a]=t||1/0,b(this)}get max(){return this[a]}set allowStale(t){this[s]=!!t}get allowStale(){return this[s]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,b(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!=typeof t&&(t=v),t!==this[o]&&(this[o]=t,this[i]=0,this[c].forEach(t=>{t.length=this[o](t.value,t.key),this[i]+=t.length})),b(this)}get lengthCalculator(){return this[o]}get length(){return this[i]}get itemCount(){return this[c].length}rforEach(t,e){e=e||this;for(let r=this[c].tail;null!==r;){const n=r.prev;w(this,t,r,e),r=n}}forEach(t,e){e=e||this;for(let r=this[c].head;null!==r;){const n=r.next;w(this,t,r,e),r=n}}keys(){return this[c].toArray().map(t=>t.key)}values(){return this[c].toArray().map(t=>t.value)}reset(){this[h]&&this[c]&&this[c].length&&this[c].forEach(t=>this[h](t.key,t.value)),this[f]=new Map,this[c]=new n,this[i]=0}dump(){return this[c].map(t=>!p(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[c]}set(t,e,r){if((r=r||this[l])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[o](e,t);if(this[f].has(t)){if(s>this[a])return y(this,this[f].get(t)),!1;const o=this[f].get(t).value;return this[h]&&(this[u]||this[h](t,o.value)),o.now=n,o.maxAge=r,o.value=e,this[i]+=s-o.length,o.length=s,this.get(t),b(this),!0}const d=new m(t,e,s,n,r);return d.length>this[a]?(this[h]&&this[h](t,e),!1):(this[i]+=d.length,this[c].unshift(d),this[f].set(t,this[c].head),b(this),!0)}has(t){if(!this[f].has(t))return!1;const e=this[f].get(t).value;return!p(this,e)}get(t){return g(this,t,!0)}peek(t){return g(this,t,!1)}pop(){const t=this[c].tail;return t?(y(this,t),t.value):null}del(t){y(this,this[f].get(t))}load(t){this.reset();const e=Date.now();for(let r=t.length-1;r>=0;r--){const n=t[r],a=n.e||0;if(0===a)this.set(n.k,n.v);else{const t=a-e;t>0&&this.set(n.k,n.v,t)}}}prune(){this[f].forEach((t,e)=>g(this,e,!1))}}},function(t,e,r){"use strict";function n(t){var e=this;if(e instanceof n||(e=new n),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var r=0,a=arguments.length;r<a;r++)e.push(arguments[r]);return e}function a(t,e,r){var n=e===t.head?new s(r,null,e,t):new s(r,e,e.next,t);return null===n.next&&(t.tail=n),null===n.prev&&(t.head=n),t.length++,n}function i(t,e){t.tail=new s(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function o(t,e){t.head=new s(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,e,r,n){if(!(this instanceof s))return new s(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e},n.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},n.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},n.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)i(this,arguments[t]);return this.length},n.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},n.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},n.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},n.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},n.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},n.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},n.prototype.map=function(t,e){e=e||this;for(var r=new n,a=this.head;null!==a;)r.push(t.call(e,a.value,this)),a=a.next;return r},n.prototype.mapReverse=function(t,e){e=e||this;for(var r=new n,a=this.tail;null!==a;)r.push(t.call(e,a.value,this)),a=a.prev;return r},n.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var a=0;null!==n;a++)r=t(r,n.value,a),n=n.next;return r},n.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var a=this.length-1;null!==n;a--)r=t(r,n.value,a),n=n.prev;return r},n.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},n.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},n.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var a=0,i=this.head;null!==i&&a<t;a++)i=i.next;for(;null!==i&&a<e;a++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var r=new n;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var a=this.length,i=this.tail;null!==i&&a>e;a--)i=i.prev;for(;null!==i&&a>t;a--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(t,e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;null!==n&&r<t;r++)n=n.next;var i=[];for(r=0;n&&r<e;r++)i.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=2;r<arguments.length;r++)n=a(this,n,arguments[r]);return i},n.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};try{r(11)(n)}catch(t){}},function(t,e,r){"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e,r,n,i,o,s){for(var l=0;l<e;l++){for(var h=0;h<r;h++)n[h]=t[h*e+l];for(a(n,i,o,s,r),h=0;h<r;h++)t[h*e+l]=i[h]}for(h=0;h<r;h++){for(l=0;l<e;l++)n[l]=t[h*e+l];for(a(n,i,o,s,e),l=0;l<e;l++)t[h*e+l]=Math.sqrt(i[l])}}function a(t,e,r,n,a){r[0]=0,n[0]=-1e20,n[1]=1e20;for(var i=1,o=0;i<a;i++){for(var s=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);s<=n[o];)o--,s=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);r[++o]=i,n[o]=s,n[o+1]=1e20}for(i=0,o=0;i<a;i++){for(;n[o+1]<i;)o++;e[i]=(i-r[o])*(i-r[o])+t[r[o]]}}
/*!
 * copied and modified from https://github.com/mapbox/tiny-sdf/blob/master/index.js
 * @license Licensed under ISC
 *
 * @export
 * @class TinySDF
 */e.TinySDF=class{constructor(t=24,e=3,r=8,n=.25,a="sans-serif"){this.fontFamily="sans-serif",this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=a||"sans-serif",this.radius=r||8;var i=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=i,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="ideographic",this.ctx.fillStyle="black",this.ctx.lineJoin="miter",this.ctx.miterLimit=10,this.gridOuter=new Float64Array(i*i),this.gridInner=new Float64Array(i*i),this.f=new Float64Array(i),this.d=new Float64Array(i),this.z=new Float64Array(i+1),this.v=new Int16Array(i),this.middle=Math.round(i/2*2)+5}renderToImageData(t,e="sans-serif"){this.fontFamily=e,this.ctx.font=this.fontSize+"px "+this.fontFamily,this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var r=this.ctx.getImageData(0,0,this.size,this.size),a=r.data,i=0;i<this.size*this.size;i++){var o=a[4*i+3]/255;this.gridOuter[i]=1===o?0:0===o?1e20:Math.pow(Math.max(0,.5-o),2),this.gridInner[i]=1===o?1e20:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(n(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),n(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),i=0;i<this.size*this.size;i++){var s=this.gridOuter[i]-this.gridInner[i],l=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))));a[4*i+0]=l,a[4*i+1]=l,a[4*i+2]=l,a[4*i+3]=255}return r}measureCharacter(t,e="sans-serif"){return this.fontFamily=e,this.ctx.font=this.fontSize+"px "+this.fontFamily,[this.ctx.measureText(t).width+2*this.buffer,this.size]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function*t(e,r=0){const n=e instanceof Array?e:e.children;let a=r;for(const e of n)yield[e,a],e.children&&e.children.length&&(a+=1,yield*t(e.children,a),a-=1)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=r(0),i=a.getSDFConfig(),o=n(r(15)),s={fontFamily:"sans-serif",fillEnable:!0,fillColor:"black",fillAlpha:1,shadowEnable:!1,shadowColor:"black",shadowAlpha:1,shadowAngle:Math.PI/6,shadowDistance:5,shadowThickness:2,shadowBlur:.15,strokeEnable:!1,strokeColor:"black",strokeAlpha:1,strokeThickness:0,fontSize:18,italic:!1,bold:!1,strike:!1,underline:!1},l={fontFamily:"sans-serif",gridSize:18,column:25,row:1/0,xInterval:0,yInterval:6,letterSpacing:0,inlineCompression:!0,forceGridAlignment:!0,westernCharacterFirst:!1,forceSpaceBetweenCJKAndWestern:!1};class h{constructor(t,e){Object.assign(this,s,t),this.layout=Object.assign({},l,e)}clone(){const t={};for(const e in s)t[e]=this[e];return t.layout=Object.assign({},this.layout),new h(t)}reset(){Object.assign(this,s),Object.assign(this.layout,l)}get state(){return{fontFamily:this.fontFamily instanceof Array?this.fontFamily.join(","):this.fontFamily,fontSize:this.fontSize,fillEnable:+this.fillEnable,fillColor:this.fillRGBA,fill:this.fill,strokeEnable:+this.strokeEnable,strokeColor:this.strokeRGBA,stroke:this.stroke,shadowEnable:+this.shadowEnable,shadowColor:this.shadowRGBA,shadowOffset:this.shadowOffset,shadow:this.shadow,shadowBlur:this.shadowBlur,italic:this.italic,gamma:this.gamma,baseTexture:a.getSDFTexture()}}get shadowOffset(){const t=i.size/this.fontSize,e=this.shadowDistance*t/i.textureSize;return[Math.cos(this.shadowAngle)*e,Math.sin(this.shadowAngle)*e]}get fillRGBA(){const t=o.default(this.fillColor).rgbNumber();return(t>>16)+(65280&t)+((255&t)<<16)+(255*this.fillAlpha<<24)}get strokeRGBA(){const t=o.default(this.strokeColor).rgbNumber();return(t>>16)+(65280&t)+((255&t)<<16)+(255*this.strokeAlpha<<24)}get shadowRGBA(){const t=o.default(this.shadowColor).rgbNumber();return(t>>16)+(65280&t)+((255&t)<<16)+(255*this.shadowAlpha<<24)}get fill(){return.74-.01*+!this.strokeEnable-.04*+this.bold}get stroke(){return Math.max(0,-.06*this.strokeThickness+.7)}get shadow(){return Math.max(0,-.06*this.shadowThickness+.7)}get gamma(){return 2.8284/(this.fontSize*(this.strokeEnable?1.8:1))}}e.default=h},function(t,e,r){"use strict";var n=r(16),a=r(19),i=[].slice,o=["keyword","gray","hex"],s={};Object.keys(a).forEach((function(t){s[i.call(a[t].labels).sort().join("")]=t}));var l={};function h(t,e){if(!(this instanceof h))return new h(t,e);if(e&&e in o&&(e=null),e&&!(e in a))throw new Error("Unknown model: "+e);var r,u;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof h)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var c=n.get(t);if(null===c)throw new Error("Unable to parse color from string: "+t);this.model=c.model,u=a[this.model].channels,this.color=c.value.slice(0,u),this.valpha="number"==typeof c.value[u]?c.value[u]:1}else if(t.length){this.model=e||"rgb",u=a[this.model].channels;var f=i.call(t,0,u);this.color=d(f,u),this.valpha="number"==typeof t[u]?t[u]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var v=Object.keys(t);"alpha"in t&&(v.splice(v.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var g=v.sort().join("");if(!(g in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[g];var p=a[this.model].labels,b=[];for(r=0;r<p.length;r++)b.push(t[p[r]]);this.color=d(b)}if(l[this.model])for(u=a[this.model].channels,r=0;r<u;r++){var y=l[this.model][r];y&&(this.color[r]=y(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(t,e,r){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(l[t]||(l[t]=[]))[e]=r})),t=t[0],function(n){var a;return arguments.length?(r&&(n=r(n)),(a=this[t]()).color[e]=n,a):(a=this[t]().color[e],r&&(a=r(a)),a)}}function c(t){return function(e){return Math.max(0,Math.min(t,e))}}function f(t){return Array.isArray(t)?t:[t]}function d(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}h.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in n.to?this:this.rgb(),r=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return n.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=a[this.model].channels,r=a[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new h(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new h(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:u("rgb",0,c(255)),green:u("rgb",1,c(255)),blue:u("rgb",2,c(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:u("hsl",1,c(100)),lightness:u("hsl",2,c(100)),saturationv:u("hsv",1,c(100)),value:u("hsv",2,c(100)),chroma:u("hcg",1,c(100)),gray:u("hcg",2,c(100)),white:u("hwb",1,c(100)),wblack:u("hwb",2,c(100)),cyan:u("cmyk",0,c(100)),magenta:u("cmyk",1,c(100)),yellow:u("cmyk",2,c(100)),black:u("cmyk",3,c(100)),x:u("xyz",0,c(100)),y:u("xyz",1,c(100)),z:u("xyz",2,c(100)),l:u("lab",0,c(100)),a:u("lab",1),b:u("lab",2),keyword:function(t){return arguments.length?new h(t):a[this.model].keyword(this.color)},hex:function(t){return arguments.length?new h(t):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return h.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r=(r+t)%360)<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),a=void 0===e?.5:e,i=2*a-1,o=r.alpha()-n.alpha(),s=((i*o==-1?i:(i+o)/(1+i*o))+1)/2,l=1-s;return h.rgb(s*r.red()+l*n.red(),s*r.green()+l*n.green(),s*r.blue()+l*n.blue(),r.alpha()*a+n.alpha()*(1-a))}},Object.keys(a).forEach((function(t){if(-1===o.indexOf(t)){var e=a[t].channels;h.prototype[t]=function(){if(this.model===t)return new h(this);if(arguments.length)return new h(arguments,t);var r="number"==typeof arguments[e]?e:this.valpha;return new h(f(a[this.model][t].raw(this.color)).concat(r),t)},h[t]=function(r){return"number"==typeof r&&(r=d(i.call(arguments),e)),new h(r,t)}}})),t.exports=h},function(t,e,r){var n=r(1),a=r(17),i={};for(var o in n)n.hasOwnProperty(o)&&(i[n[o]]=o);var s=t.exports={to:{},get:{}};function l(t,e,r){return Math.min(Math.max(e,t),r)}function h(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}s.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),r="hsl";break;case"hwb":e=s.get.hwb(t),r="hwb";break;default:e=s.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,r,a,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(a=e[2],e=e[1],r=0;r<3;r++){var o=2*r;i[r]=parseInt(e.slice(o,o+2),16)}a&&(i[3]=Math.round(parseInt(a,16)/255*100)/100)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(a=(e=e[1])[3],r=0;r<3;r++)i[r]=parseInt(e[r]+e[r],16);a&&(i[3]=Math.round(parseInt(a+a,16)/255*100)/100)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)i[r]=parseInt(e[r+1],0);e[4]&&(i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(i=n[e[1]])?(i[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(i[3]=parseFloat(e[4]))}for(r=0;r<3;r++)i[r]=l(i[r],0,255);return i[3]=l(i[3],0,1),i},s.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},s.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,l(parseFloat(e[2]),0,100),l(parseFloat(e[3]),0,100),l(isNaN(r)?1:r,0,1)]}return null},s.to.hex=function(){var t=a(arguments);return"#"+h(t[0])+h(t[1])+h(t[2])+(t[3]<1?h(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=a(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=a(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},s.to.hsl=function(){var t=a(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=a(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return i[t.slice(0,3)]}},function(t,e,r){"use strict";var n=r(18),a=Array.prototype.concat,i=Array.prototype.slice,o=t.exports=function(t){for(var e=[],r=0,o=t.length;r<o;r++){var s=t[r];n(s)?e=a.call(e,i.call(s)):e.push(s)}return e};o.wrap=function(t){return function(){return t(o(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,r){var n=r(2),a=r(20),i={};Object.keys(n).forEach((function(t){i[t]={},Object.defineProperty(i[t],"channels",{value:n[t].channels}),Object.defineProperty(i[t],"labels",{value:n[t].labels});var e=a(t);Object.keys(e).forEach((function(r){var n=e[r];i[t][r]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"==typeof r)for(var n=r.length,a=0;a<n;a++)r[a]=Math.round(r[a]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(n),i[t][r].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)}))})),t.exports=i},function(t,e,r){var n=r(2);function a(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,a=0;a<r;a++)t[e[a]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var a=r.pop(),i=Object.keys(n[a]),o=i.length,s=0;s<o;s++){var l=i[s],h=e[l];-1===h.distance&&(h.distance=e[a].distance+1,h.parent=a,r.unshift(l))}return e}function i(t,e){return function(r){return e(t(r))}}function o(t,e){for(var r=[e[t].parent,t],a=n[e[t].parent][t],o=e[t].parent;e[o].parent;)r.unshift(e[o].parent),a=i(n[e[o].parent][o],a),o=e[o].parent;return a.conversion=r,a}t.exports=function(t){for(var e=a(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var l=n[s];null!==e[l].parent&&(r[l]=o(l,e))}return r}},function(t,e,r){"use strict";r.r(e);var n="「」『』“”‘’（）【】〖〗〔〕［］｛｝⸺—…●•–～~～～·﹏《》〈〉＿/／。，、．：；！‼？⁇ ",a=["\\u1100-\\u11FF","\\u2E80-\\u2EFF","\\u2F00-\\u2FDF","\\u2FF0-\\u2FFF","\\u3000-\\u303F","\\u3040-\\u309F","\\u30A0-\\u30FF","\\u3100-\\u312F","\\u3130-\\u318F","\\u3190-\\u319F","\\u31A0-\\u31BF","\\u31F0-\\u31FF","\\u3200-\\u32FF","\\u3300-\\u33FF","\\u3400-\\u4DBF","\\u4DC0-\\u4DFF","\\u4E00-\\u9FFF","\\uAC00-\\uD7AF","\\uF900-\\uFAFF","\\uFE30-\\uFE4F","\\uFF00-\\uFFEF","\\u{1D300}-\\u{1D35F}","\\u{20000}-\\u{2A6DF}","\\u{2A700}-\\u{2B73F}","\\u{2B740}-\\u{2B81F}","\\u{2B820}-\\u{2CEAF}","\\u{2CEB0}-\\u{2EBEF}","\\u{2F800}-\\u{2FA1F}"],i=void 0;try{i=new RegExp("["+a.join("")+"]","u")}catch(t){i=new RegExp("["+a.slice(0,21).join("")+"]")}r.d(e,"default",(function(){return c}));var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function s(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}
/*!
 * @author      Icemic Jia <bingfeng.web@gmail.com>
 * @copyright   2017-present Icemic Jia
 * @link        https://github.com/Icemic/huozi.js
 * @license     Apache License 2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=document.createElement("canvas").getContext("2d");l.font="18px sans-serif";var h=18===l.measureText("中").width,u={fontFamily:"sans-serif",gridSize:26,column:25,row:1/0,xInterval:0,yInterval:12,letterSpacing:0,inlineCompression:!0,forceGridAlignment:!0,westernCharacterFirst:!1,forceSpaceBetweenCJKAndWestern:!1,fixLeftQuote:!0};function c(t,e,r){for(var a,c=e=Object.assign({},u,e),d=c.fontFamily,v=c.gridSize,g=c.column,p=c.row,b=c.xInterval,y=c.yInterval,m=c.inlineCompression,w=c.forceGridAlignment,x=c.westernCharacterFirst,S=c.forceSpaceBetweenCJKAndWestern,k=c.fixLeftQuote,A=0,F=0,M=0,C=0,_=!1,I=0,E=!1,T=v,P=[],z=x,O=[],B=function(){A=0,M=0,C+=1,F+=T+y,T=v,_=!1,I=0,E=!1},j=[].concat(s(t),[{fontSize:12,character:"　"}]),D=0;D<j.length;D++){var L=j[D],G=L.fontSize,N=L.character;if(m&&_&&!n.includes(N)&&(A+=I/2+b,M+=.5,_=!1),/[ “”‘’]/.test(N)&&z)P.push(L);else if(a=N,i.test(a)||/[\n “”‘’]/.test(N)){if(P.length){var R=S?.25*v:0;A&&(A+=R);var U,X,q=void 0,Y=f(P,e,A,F,C,g*v,p),V=o(Y,5);q=V[0],X=V[1],F=V[2],C=V[3],U=V[4],M=Math.ceil(X/(v+b)),A=M*(v+b),U||function(){A-X<R&&(A=(M+=1)*v);var t=(R+A-X)/2-R;q=q.map((function(e){return e.x+=t,r&&r(e)||e}))}(),O.push.apply(O,s(q)),z=!1,P=[]}var W=!1;if(M>=g&&(W=!0,(!"。，、．：；！‼？⁇」』”’）】〗〕］｝》〉 ".includes(N)||"「『“‘（【〖〔［｛《〈 ".includes(N)||E)&&B()),"\n"!==N){l.font=G+"px "+d;var $=l.measureText(N).width,J=0,H=(G-v)/2,Q=!1;w&&G!==v&&(M+=(J=+w*(G-v)/2)>0?Math.ceil(2*J/(v+b)):0,J=((1+Math.ceil(2*J/(v+b)))*(v+b)-G)/2,A+=J,M>=g&&!"。，、．：；！‼？⁇」』”’）】〗〕］｝》〉 ".includes(N)&&(B(),Q=!0));var K=0;K+=_||"“"!==N?0:G/2,k&&("“"!==N||h?"“"===N&&$===G&&(K+=-G/2):K+=-G/2);var Z=Object.assign({},L,{x:A+K,y:F-H,width:$,height:G});O.push(r&&r(Z)||Z);var tt=J*(Q?2:1);if(tt>v&&(tt-=v,M-=1),A+=tt,W&&"。，、．：；！‼？⁇」』”’）】〗〕］｝》〉 ".includes(N)&&!"‼⁇⸺—".includes(N)?(A+=G/2,(M+=.5)%1!=.5&&(E=!0)):m&&n.includes(N)&&!"‼⁇⸺—".includes(N)?(A+=G/2+b*+_,M+=.5,_=!_):(A+=G+b,M+=1),T=Math.max(T,G),I=G,C>=p)break}else!W&&B()}else z=!0,P.push(L)}return O.pop(),O}function f(t,e,r,n,a,i,o){var s=e.fontFamily,h=e.gridSize,u=e.yInterval,c=e.letterSpacing,f=[],d=h,v="",g=[],p=!1;" "!==t[t.length-1].character&&t.push({fontSize:0,character:" "});var b=!0,y=!1,m=void 0;try{for(var w,x=t[Symbol.iterator]();!(b=(w=x.next()).done);b=!0){var S=w.value,k=S.fontSize,A=S.character;if(d=Math.max(d,k)," "===A){if(i-r<l.measureText(v).width&&(r=0,n+=d+u,p=!0,(a+=1)>=o))break;var F=!0,M=!1,C=void 0;try{for(var _,I=g[Symbol.iterator]();!(F=(_=I.next()).done);F=!0){var E=_.value,T=E.fontSize,P=(E.character,(T-h)/2);f.push(Object.assign({},E,{x:r,y:n-P})),r+=E.width+c}}catch(t){M=!0,C=t}finally{try{!F&&I.return&&I.return()}finally{if(M)throw C}}r+=.35*h,v="",g=[]}else{l.font=k+"px "+s;var z=l.measureText(A).width;v+=A,g.push(Object.assign({},S,{width:z,height:k}))}}}catch(t){y=!0,m=t}finally{try{!b&&x.return&&x.return()}finally{if(y)throw m}}return[f,r-.35*h,n,a,p]}}]);
